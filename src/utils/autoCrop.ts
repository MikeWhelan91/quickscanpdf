import * as ImageManipulator from 'expo-image-manipulator';import { Image } from 'react-native';export async function autoCropToA4(uri:string){const size=await new Promise<{w:number;h:number}>((res,rej)=>{Image.getSize(uri,(w,h)=>res({w,h}),(e)=>rej(e));});const A4=1.41421356;const{w,h}=size;let cw=w,ch=Math.round(w*A4);if(ch>h){ch=h;cw=Math.round(h/A4);}const ox=Math.max(0,Math.round((w-cw)/2));const oy=Math.max(0,Math.round((h-ch)/2));const r=await ImageManipulator.manipulateAsync(uri,[{crop:{originX:ox,originY:oy,width:cw,height:ch}}],{compress:0.9,format:ImageManipulator.SaveFormat.JPEG});return r.uri;}